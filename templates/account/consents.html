{% extends "base_auth.html" %}
{% load i18n widget_tweaks %}
{% block title %}
    {% trans "Consents & verification" %}
{% endblock %}
{% block content %}
    <style>
  /* Shared auth styling (matches your login/signup) */
  .auth-wrap {
    min-height: 100vh;
    background: linear-gradient(135deg, #f3f6ff 0%, #eef3ff 40%, #e9f3ff 100%);
    display: flex; align-items: center;
  }
  .auth-card {
    backdrop-filter: saturate(180%) blur(8px);
    border: 0; border-radius: 1.25rem;
    box-shadow: 0 20px 60px rgba(23, 28, 38, 0.12);
    overflow: hidden;
  }
  .brand-pane {
    background: radial-gradient(1200px 600px at -10% -20%, rgba(92,123,255,0.18), transparent 60%),
                linear-gradient(140deg, #5c7bff 0%, #7aa8ff 55%, #88e0ff 100%);
    color:#fff; position:relative;
  }
  .brand-pane:before, .brand-pane:after {
    content:""; position:absolute; border-radius:999px; filter:blur(16px); opacity:.25;
  }
  .brand-pane:before { width:220px; height:220px; background:#fff; top:-40px; right:-40px; }
  .brand-pane:after  { width:160px; height:160px; background:#00204a; bottom:-30px; left:-30px; }
  .brand-logo {
    display:inline-flex; align-items:baseline; color:#fff; text-decoration:none;
    font-weight:800; letter-spacing:.5px; font-size:clamp(1.4rem,2.2vw,2rem);
  }
  .form-pane { background:#fff; }
  .title { font-weight:800; letter-spacing:.3px; }
  .subtle { color:#6b7280; }
  .info-banner {
    border-radius:.9rem; border:1px solid #cfe4ff; background:#eaf3ff; color:#113a72;
    padding:.9rem 1rem;
  }
  .btn-rounded { border-radius:.9rem; }
  .input-help { font-size:.9rem; color:#6b7280; }

  /* Dark mode */
  .dark .auth-wrap { background: linear-gradient(135deg, #0b1220 0%, #0e1729 60%, #0b1328 100%); }
  .dark .auth-card { background:#0f172a; box-shadow:0 20px 60px rgba(0,0,0,.55); }
  .dark .form-pane { background:#0f172a; color:#e5e7eb; }
  .dark .subtle, .dark .input-help { color:#9ca3af; }
  .dark .info-banner { background:#0b2546; border-color:#143a66; color:#cde1ff; }
    </style>
    <div class="auth-wrap py-4">
        <div class="container">
            {% include "partials/messages.html" %}
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="card auth-card">
                        <div class="row g-0">
                            <!-- LEFT: Brand / helper pane (same look as signup) -->
                            <div class="col-lg-5 brand-pane p-4 p-md-5 d-none d-lg-flex flex-column justify-content-between">
                                <div>
                                    <a href="{% url 'dashboard' %}" class="brand-logo">
                                        <span>Redditch</span>&nbsp;<span>HC</span>
                                    </a>
                                    <h2 class="mt-3">{% trans "Consents & verification" %}</h2>
                                    <p class="mb-0">{% trans "Confirm these to finish setting up your account." %}</p>
                                </div>
                                <div class="info-banner mt-4">
                                    <strong>{% trans "Parents & guardians" %}:</strong>
                                    {% trans "Create your own account first — you’ll add your child after sign-up." %}
                                </div>
                            </div>
                            <!-- RIGHT: Consent form -->
                            <div class="col-lg-7 form-pane p-4 p-md-5">
                                <h1 class="h4 title mb-2">{% trans "Final step" %}</h1>
                                <p class="subtle mb-4">{% trans "Please review and confirm the required consents below." %}</p>
                                <form method="post" novalidate>
                                    {% csrf_token %}
                                    {{ form.non_field_errors }}
                                    <!-- Terms of Service -->
                                    <div class="form-check mb-4">
                                        {% render_field form.accept_terms class+="form-check-input" id="id_accept_terms" required="required" %}
                                        <label class="form-check-label" for="id_accept_terms">
                                            <strong>{% trans "Terms of Service" %}</strong> —
                                            I agree to the <a href="{% url 'terms' %}" target="_blank">RHC Portal Terms of Service</a> and acknowledge my data will be stored, processed and shared by RHC in accordance with their
                                            <a href="{% url 'privacy_policy' %}" target="_blank">Privacy Policy</a>.
                                            <span class="badge bg-light text-muted ms-2">{% trans "Required" %}</span>
                                        </label>
                                    </div>
                                    <!-- Club Consent -->
                                    <div class="form-check mb-4">
                                        {% render_field form.accept_club class+="form-check-input" id="id_accept_club" required="required" %}
                                        <label class="form-check-label" for="id_accept_club">
                                            <strong>{% trans "Club Consent" %}</strong> —
                                            {% trans "I consent to my data being stored and processed by Redditch Hockey Club for use in their management system which helps to organise the playing and enjoyment of sport for it's members." %}
                                            <span class="badge bg-light text-muted ms-2">{% trans "Required" %}</span>
                                        </label>
                                    </div>
                                    <!-- England Hockey Consent -->
                                    <div class="form-check mb-4">
                                        {% render_field form.accept_eh_data class+="form-check-input" id="id_accept_eh_data" required="required" %}
                                        <label class="form-check-label" for="id_accept_eh_data">
                                            <strong>{% trans "England Hockey Consent" %}</strong> —
                                            {% trans "I understand that my personal data will be shared with England Hockey as the Governing Body of hockey in England to exercise their legitimate interest to better administer the sport and/or develop new participation programmes to meet the needs of those playing hockey, and that England Hockey may contact me where they have a legitimate interest to do so" %}.
                                            <span class="badge bg-light text-muted ms-2">{% trans "Required" %}</span>
                                        </label>
                                    </div>
                                    {# keep if you’re using v3 captcha; safe if unused #}
                                    {% render_field form.recaptcha_token %}
                                    <button type="submit" class="btn btn-primary btn-rounded w-100 py-2">{% trans "Finish" %}</button>
                                </form>
                            </div>
                            <!-- /form-pane -->
                        </div>
                        <!-- /row -->
                    </div>
                    <!-- /card -->
                </div>
            </div>
        </div>
    </div>
{% endblock %}
