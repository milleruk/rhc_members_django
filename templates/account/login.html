{% extends "base_auth.html" %}
{% load i18n account socialaccount widget_tweaks %}
{% block title %}
    {% trans "Login" %}
{% endblock %}
{% block content %}
    <style>
  /* ==== Colorlib-style login-07 inspired ==== */
  .auth-wrap {
    min-height: 100vh;
    background: linear-gradient(135deg, #f3f6ff 0%, #eef3ff 40%, #e9f3ff 100%);
    display: flex; align-items: center;
  }
  .auth-card {
    backdrop-filter: saturate(180%) blur(8px);
    border: 0;
    border-radius: 1.25rem;
    box-shadow: 0 20px 60px rgba(23, 28, 38, 0.12);
    overflow: hidden;
  }
  .brand-pane {
    background: radial-gradient(1200px 600px at -10% -20%, rgba(92, 123, 255, 0.18), transparent 60%),
                linear-gradient(140deg, #5c7bff 0%, #7aa8ff 55%, #88e0ff 100%);
    color: #fff;
    position: relative;
  }
  .brand-pane:before,
  .brand-pane:after {
    content: "";
    position: absolute;
    border-radius: 999px;
    filter: blur(16px);
    opacity: 0.25;
  }
  .brand-pane:before {
    width: 220px; height: 220px; background: #ffffff;
    top: -40px; right: -40px;
  }
  .brand-pane:after {
    width: 160px; height: 160px; background: #00204a;
    bottom: -30px; left: -30px;
  }
  .brand-logo {
    display: inline-flex; align-items: baseline;
    font-weight: 800; letter-spacing: .5px;
    text-decoration: none; color: #fff;
    font-size: clamp(1.4rem, 2.2vw, 2rem);
  }
  .brand-pane h2 {
    font-weight: 800; line-height: 1.1;
    margin-top: .75rem;
  }
  .brand-pane p {
    opacity: .95;
  }
  .muted-link, .muted-link:hover { color: rgba(255,255,255,0.95); text-decoration: underline; }

  .form-pane {
    background: #fff;
  }
  .form-pane .title {
    font-weight: 800;
    letter-spacing: .3px;
  }
  .subtle {
    color: #6b7280;
    font-size: .95rem;
  }
  .input-group .form-control {
    border-radius: .9rem;
  }
  .input-group-text {
    border-radius: .9rem;
  }
  .btn-rounded { border-radius: .9rem; }
  .divider {
    position: relative;
    text-align: center;
    margin: 1.25rem 0;
  }
  .divider span {
    background: #fff; padding: 0 .75rem; position: relative; z-index: 1; color: #6b7280; font-size: .9rem;
  }
  .divider:before {
    content: ""; position: absolute; left: 0; right: 0; top: 50%;
    border-top: 1px dashed #e5e7eb;
  }
  .social-grid { display: grid; gap: .6rem; grid-template-columns: repeat(2, 1fr); }
  .social-btn { border-radius: .8rem; }
  .notice {
    background: #eef2ff; border: 1px solid #e0e7ff; color: #1e3a8a;
    border-radius: .9rem; padding: .75rem .9rem;
  }

  /* Dark mode support if your base toggles .dark on <html> or <body> */
  .dark .auth-wrap { background: linear-gradient(135deg, #0b1220 0%, #0e1729 60%, #0b1328 100%); }
  .dark .auth-card { background: #0f172a; box-shadow: 0 20px 60px rgba(0,0,0,.55); }
  .dark .form-pane { background: #0f172a; color: #e5e7eb; }
  .dark .divider span { background: #0f172a; color: #9ca3af; }
  .dark .divider:before { border-top-color: #1f2937; }
  .dark .notice { background: #0b2546; border-color: #143a66; color: #cde1ff; }
  .dark .subtle { color: #9ca3af; }
  .dark .input-group .form-control,
  .dark .input-group-text {
    background: #0b1220; border-color: #1f2a44; color: #e5e7eb;
  }
    </style>
    <div class="auth-wrap py-4">
        <div class="container">
            {% include "partials/messages.html" %}
            <!-- Club Website pointer -->
            <div class="row justify-content-center mb-4">
                <div class="col-12 col-lg-8 col-xl-7">
                    <div class="notice d-flex flex-column flex-md-row align-items-md-center gap-2">
                        <div class="flex-grow-1">
                            <strong>Redditch HC Members’ Portal</strong> — Looking for the main club website?
                        </div>
                        <div>
                            <a href="https://redditchhc.co.uk"
                               class="btn btn-sm btn-outline-primary btn-rounded">Go to redditchhc.co.uk</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Main Card -->
            <div class="row justify-content-center">
                <div class="col-12 col-lg-10">
                    <div class="card auth-card">
                        <div class="row g-0">
                            <!-- Brand / Left -->
                            <div class="col-lg-6 brand-pane p-4 p-md-5 d-none d-lg-flex flex-column justify-content-between">
                                <div>
                                    <a href="{% url 'dashboard' %}" class="brand-logo">
                                        <span>Redditch</span>&nbsp;<span>HC</span>
                                    </a>
                                    <h2 class="mt-3">Members Portal</h2>
                                    <p class="mb-0">Manage memberships, players, incidents, tasks and more — all in one place.</p>
                                </div>
                                <div class="small mt-4">
                                    <span class="opacity-75">By signing in you agree to our</span>
                                    &nbsp;<a class="muted-link" href="#">Terms</a> &amp; <a class="muted-link" href="#">Privacy</a>.
                                </div>
                            </div>
                            <!-- Form / Right -->
                            <div class="col-lg-6 form-pane p-4 p-md-5">
                                <h1 class="h3 title mb-1">{% trans "Welcome back" %}</h1>
                                <p class="subtle mb-4">{% trans "Sign in to start your session" %}</p>
                                <!-- Social providers -->
                                {% include "socialaccount/snippets/provider_list.html" %}
                                <div class="divider">
                                    <span>{% trans "or continue with email" %}</span>
                                </div>
                                <form method="post" action="{% url 'account_login' %}" novalidate>
                                    {% csrf_token %}
                                    {% if form.non_field_errors %}
                                        <div class="alert alert-danger mb-3">{{ form.non_field_errors|striptags }}</div>
                                    {% endif %}
                                    <!-- Email/Username -->
                                    <div class="input-group mb-3">
                                        {% render_field form.login class+="form-control" placeholder=form.login.label %}
                                        <span class="input-group-text">
                                            <i class="fas fa-envelope"></i>
                                        </span>
                                    </div>
                                    {% if form.login.errors %}<div class="text-danger small mb-2">{{ form.login.errors|striptags }}</div>{% endif %}
                                    <!-- Password -->
                                    <div class="input-group mb-3">
                                        {% render_field form.password class+="form-control" placeholder=form.password.label %}
                                        <span class="input-group-text">
                                            <i class="fas fa-lock"></i>
                                        </span>
                                    </div>
                                    {% if form.password.errors %}<div class="text-danger small mb-2">{{ form.password.errors|striptags }}</div>{% endif %}
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div class="form-check">
                                            {{ form.remember }}
                                            <label class="form-check-label" for="id_remember">{% trans "Remember me" %}</label>
                                        </div>
                                        <a class="small" href="{% url 'account_reset_password' %}">{% trans "Forgot password?" %}</a>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-rounded w-100 py-2">{% trans "Sign In" %}</button>
                                    {% if redirect_field_value %}
                                        <input type="hidden"
                                               name="{{ redirect_field_name }}"
                                               value="{{ redirect_field_value }}">
                                    {% endif %}
                                </form>
                                <!-- Helpful links -->
                                <div class="mt-4">
                                    <div class="row g-2">
                                        <div class="col-12 col-md-6">
                                            <a href="{% url 'account_signup' %}"
                                               class="btn btn-outline-success btn-rounded w-100">
                                                <i class="fas fa-user-plus me-1"></i> {% trans "Register a new membership" %}
                                            </a>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <a href="{% url 'account_resend_confirmation' %}"
                                               class="btn btn-outline-info btn-rounded w-100">
                                                <i class="fas fa-envelope me-1"></i> {% trans "Resend confirmation email" %}
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <!-- Dev note area (optional) -->
                                <div class="mt-3 subtle small">
                                    {% comment %} If you’re disabling some providers for now, surface a hint here. {% endcomment %}
                                    <em>Facebook and Apple sign-in are currently in development.</em>
                                </div>
                            </div>
                        </div>
                        <!-- /row -->
                    </div>
                    <!-- /card -->
                </div>
            </div>
        </div>
    </div>
{% endblock %}
