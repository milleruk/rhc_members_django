{% extends "base_auth.html" %}
{% load i18n %}
{% block title %}{% trans "Set new password" %}{% endblock %}
{% block content %}
<div class="login-box">
  {% include "partials/messages.html" %}
  <div class="card card-outline card-primary">
    <div class="card-header text-center"><span class="h1"><b>Redditch</b>HC</span></div>
    <div class="card-body">
      {% if token_fail %}
        <div class="alert alert-danger mb-3">{% trans "This password reset link is invalid or has expired." %}</div>
        <a href="{% url 'account_reset_password' %}" class="btn btn-outline-primary btn-block">{% trans "Request a new link" %}</a>
      {% else %}
        <p class="login-box-msg">{% trans "Enter your new password" %}</p>
        <form method="post" action="{{ action_url }}" novalidate>
          {% csrf_token %}
          <div class="input-group mb-3">{{ form.password1 }}
            <div class="input-group-append"><div class="input-group-text"><span class="fas fa-lock"></span></div></div>
          </div>
          {% if form.password1.errors %}<div class="text-danger small mb-2">{{ form.password1.errors|striptags }}</div>{% endif %}
          <div class="input-group mb-3">{{ form.password2 }}
            <div class="input-group-append"><div class="input-group-text"><span class="fas fa-lock"></span></div></div>
          </div>
          {% if form.password2.errors %}<div class="text-danger small mb-2">{{ form.password2.errors|striptags }}</div>{% endif %}
          <button type="submit" class="btn btn-primary btn-block">{% trans "Change password" %}</button>
        </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
