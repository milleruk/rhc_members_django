{% extends "base_auth.html" %}
{% load i18n account socialaccount widget_tweaks %}
{% block title %}
    {% trans "Create Account" %}
{% endblock %}
{% block content %}
    <style>
  /* Layout shell (matches your new login/signup styling) */
  .auth-wrap {
    min-height: 100vh;
    background: linear-gradient(135deg, #f3f6ff 0%, #eef3ff 40%, #e9f3ff 100%);
    display: flex; align-items: center;
  }
  .auth-card {
    backdrop-filter: saturate(180%) blur(8px);
    border: 0; border-radius: 1.25rem;
    box-shadow: 0 20px 60px rgba(23,28,38,.12);
    overflow: hidden;
  }
  .form-pane { background:#fff; }
  .benefits-pane {
    background: #ffffff;
    position: relative;
  }
  .benefits-pane:before {
    content:""; position:absolute; inset:-20% -10% auto auto;
    background: radial-gradient(420px 420px at 85% 15%, rgba(92,123,255,.08), transparent 60%),
                radial-gradient(360px 360px at 60% 50%, rgba(0,32,74,.05), transparent 65%);
    width:120%; height:120%; pointer-events:none;
  }
  .title { font-weight: 800; letter-spacing:.3px; }
  .subtle { color:#6b7280; font-size:.95rem; }

  /* Info banner */
  .info-banner {
    border-radius: .9rem;
    border: 1px solid #cfe4ff;
    background: #eaf3ff;
    color: #113a72;
    padding: .9rem 1rem;
  }
  .info-banner i { opacity:.9; }

  /* Inputs/Buttons */
  .input-group .form-control { border-radius:.9rem; }
  .input-group-text { border-radius:.9rem; }
  .btn-rounded { border-radius:.9rem; }

  /* Benefits list */
  .benefits h3 { font-weight:800; }
  .benefit {
    display:flex; gap:.9rem; align-items:flex-start;
    padding:.75rem 0; border-bottom: 1px dashed #e5e7eb;
  }
  .benefit:last-child { border-bottom:0; }
  .benefit i {
    flex:0 0 auto; font-size:1.1rem;
    background:#eef2ff; border:1px solid #e0e7ff;
    width:2.25rem; height:2.25rem; border-radius:.6rem;
    display:flex; align-items:center; justify-content:center;
  }
  .benefit strong { display:block; }
  .benefit p { margin:0; color:#6b7280; }

  /* Dark mode */
  .dark .auth-wrap { background: linear-gradient(135deg, #0b1220 0%, #0e1729 60%, #0b1328 100%); }
  .dark .auth-card { background:#0f172a; box-shadow:0 20px 60px rgba(0,0,0,.55); }
  .dark .form-pane { background:#0f172a; color:#e5e7eb; }
  .dark .subtle { color:#9ca3af; }
  .dark .input-group .form-control,
  .dark .input-group-text { background:#0b1220; border-color:#1f2a44; color:#e5e7eb; }
  .dark .info-banner { background:#0b2546; border-color:#143a66; color:#cde1ff; }
  .dark .benefits-pane { background:#0f172a; }
  .dark .benefit { border-bottom-color:#1f2937; }
  .dark .benefit i { background:#0b2546; border-color:#143a66; color:#cde1ff; }
    </style>
    <div class="auth-wrap py-4">
        <div class="container">
            {% include "partials/messages.html" %}
            <div class="row justify-content-center">
                <div class="col-12 col-xxl-11">
                    <div class="card auth-card">
                        <div class="row g-0">
                            <!-- LEFT: Signup form -->
                            <div class="col-lg-7 form-pane p-4 p-md-5">
                                <h1 class="h3 title mb-1">{% trans "Join Redditch HC" %}</h1>
                                <p class="subtle mb-4">{% trans "Create your account to manage memberships and players." %}</p>
                                <!-- Child signup helper -->
                                <div class="info-banner d-flex align-items-start mb-4">
                                    <i class="fas fa-info-circle me-2 mt-1"></i>
                                    <div>
                                        <strong>{% trans "Signing up your child?" %}</strong>
                                        <div class="small">
                                            {% trans "Please register your own details as a parent/guardian now. You’ll add your child’s details in the next step." %}
                                        </div>
                                    </div>
                                </div>
                                <!-- Social providers -->
                                {% include "socialaccount/snippets/provider_list.html" %}
                                <div class="my-3 text-center text-muted small">{% trans "or continue with email" %}</div>
                                {% if form.non_field_errors %}
                                    <div class="alert alert-danger mb-3">
                                        <strong>{% trans "Please fix the errors below" %}</strong>
                                        <ul class="mb-0 mt-2">
                                            {% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}
                                        </ul>
                                    </div>
                                {% endif %}
                                <form method="post" action="{% url 'account_signup' %}" novalidate>
                                    {% csrf_token %}
                                    <div class="row">
                                        {% if form.first_name %}
                                            <div class="col-md-6 mb-3">
                                                <label for="{{ form.first_name.id_for_label }}" class="form-label">{% trans "First name" %}</label>
                                                {% render_field form.first_name class+="form-control" autocomplete="given-name" placeholder="First name" %}
                                                {% for e in form.first_name.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                            </div>
                                        {% endif %}
                                        {% if form.last_name %}
                                            <div class="col-md-6 mb-3">
                                                <label for="{{ form.last_name.id_for_label }}" class="form-label">{% trans "Last name" %}</label>
                                                {% render_field form.last_name class+="form-control" autocomplete="family-name" placeholder="Last name" %}
                                                {% for e in form.last_name.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% if form.username %}
                                        <div class="mb-3">
                                            <label for="{{ form.username.id_for_label }}" class="form-label">{% trans "Username" %}</label>
                                            {% render_field form.username class+="form-control" autocomplete="username" placeholder="Username" %}
                                            {% for e in form.username.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                        </div>
                                    {% endif %}
                                    {% if form.email %}
                                        <div class="mb-3">
                                            <label for="{{ form.email.id_for_label }}" class="form-label">{% trans "Email" %}</label>
                                            <div class="input-group">
                                                {% render_field form.email class+="form-control" autocomplete="email" placeholder="name@example.com" %}
                                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                            </div>
                                            {% for e in form.email.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                        </div>
                                    {% endif %}
                                    <div class="row">
                                        {% if form.password1 %}
                                            <div class="col-md-6 mb-3">
                                                <label for="{{ form.password1.id_for_label }}" class="form-label">{% trans "Password" %}</label>
                                                <div class="input-group">
                                                    {% render_field form.password1 class+="form-control" autocomplete="new-password" placeholder="Password" %}
                                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                                </div>
                                                {% for e in form.password1.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                            </div>
                                        {% endif %}
                                        {% if form.password2 %}
                                            <div class="col-md-6 mb-3">
                                                <label for="{{ form.password2.id_for_label }}" class="form-label">{% trans "Confirm password" %}</label>
                                                <div class="input-group">
                                                    {% render_field form.password2 class+="form-control" autocomplete="new-password" placeholder="Password (again)" %}
                                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                                </div>
                                                {% for e in form.password2.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% if form.agree_to_terms %}
                                        <div class="form-check mb-3">
                                            {% render_field form.agree_to_terms class+="form-check-input" %}
                                            <label class="form-check-label" for="{{ form.agree_to_terms.id_for_label }}">{% trans "I agree to the terms" %}</label>
                                            {% for e in form.agree_to_terms.errors %}<div class="invalid-feedback d-block">{{ e }}</div>{% endfor %}
                                        </div>
                                    {% endif %}
                                    {% if redirect_field_value %}
                                        <input type="hidden"
                                               name="{{ redirect_field_name }}"
                                               value="{{ redirect_field_value }}">
                                    {% endif %}
                                    <button type="submit" class="btn btn-primary btn-rounded w-100 py-2">{% trans "Create account" %}</button>
                                </form>
                                <!-- Helper links -->
                                <div class="mt-4">
                                    <div class="row g-2">
                                        <div class="col-12 col-md-6">
                                            <a href="{% url 'account_login' %}"
                                               class="btn btn-outline-primary btn-rounded w-100">
                                                <i class="fas fa-sign-in-alt me-1"></i> {% trans "I already have an account" %}
                                            </a>
                                        </div>
                                        <div class="col-12 col-md-6">
                                            <a href="{% url 'account_reset_password' %}"
                                               class="btn btn-outline-warning btn-rounded w-100">
                                                <i class="fas fa-unlock-alt me-1"></i> {% trans "Forgot password?" %}
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-3 subtle small">
                                    <em>{% trans "Facebook and Apple sign-in are currently in development." %}</em>
                                </div>
                            </div>
                            <!-- RIGHT: Benefits panel -->
                            <div class="col-lg-5 benefits-pane p-4 p-md-5">
                                <h3 class="mb-3">{% trans "Get these benefits" %}</h3>
                                <div class="benefits">
                                    <div class="benefit">
                                        <i class="fas fa-users"></i>
                                        <div>
                                            <strong>{% trans "Manage your players" %}</strong>
                                            <p>{% trans "Add children, update details, and manage emergency contacts in one place." %}</p>
                                        </div>
                                    </div>
                                    <div class="benefit">
                                        <i class="fas fa-id-card-alt"></i>
                                        <div>
                                            <strong>{% trans "Digital membership card" %}</strong>
                                            <p>{% trans "Instantly access your member card for events and discounts." %}</p>
                                        </div>
                                    </div>
                                    <div class="benefit">
                                        <i class="fas fa-credit-card"></i>
                                        <div>
                                            <strong>{% trans "Memberships & payments" %}</strong>
                                            <p>{% trans "Choose the right membership and pay securely online." %}</p>
                                        </div>
                                    </div>
                                    <div class="benefit">
                                        <i class="fas fa-bell"></i>
                                        <div>
                                            <strong>{% trans "Task reminders & updates" %}</strong>
                                            <p>{% trans "Stay on top of renewals and important club tasks with notifications." %}</p>
                                        </div>
                                    </div>
                                    <div class="benefit">
                                        <i class="fas fa-flag"></i>
                                        <div>
                                            <strong>{% trans "Incident reporting" %}</strong>
                                            <p>{% trans "Report and track incidents securely with role-based notifications." %}</p>
                                        </div>
                                    </div>
                                    <div class="benefit">
                                        <i class="fas fa-shield-alt"></i>
                                        <div>
                                            <strong>{% trans "Privacy-first" %}</strong>
                                            <p>{% trans "Your data is protected and only visible to the right club roles." %}</p>
                                        </div>
                                    </div>
                                </div>
                                <hr class="my-4">
                                <div class="subtle small">
                                    <strong>{% trans "Parents & guardians" %}</strong> —
                                    {% trans "Create your own account first. You’ll add your child after registration." %}
                                </div>
                            </div>
                        </div>
                        <!-- /row -->
                    </div>
                    <!-- /card -->
                </div>
            </div>
        </div>
    </div>
{% endblock %}
