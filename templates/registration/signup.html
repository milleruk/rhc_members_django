{% extends "base_auth.html" %}
{% load widget_tweaks %}
{% block title %}Create Account{% endblock %}

{# If your base_auth.html has a head/css block, use it to scope minor tweaks #}
{% block extra_css %}
<style>
  .auth-wrap { min-height: 100vh; }
  .auth-card { max-width: 440px; width: 100%; }
  .auth-card .card { border-radius: 0.75rem; }
  .auth-card .form-control { height: 44px; }
  .auth-muted { font-size: .9rem; color: var(--secondary, #6c757d); }
  .gap-12 > * + * { margin-top: .75rem; }
</style>
{% endblock %}

{% block content %}
<div class="container auth-wrap d-flex align-items-center justify-content-center py-5">
  <div class="auth-card">

    {# flash messages #}
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} mb-3">{{ message }}</div>
      {% endfor %}
    {% endif %}

    {# non-field errors #}
    {% if form.non_field_errors %}
      <div class="alert alert-danger mb-3">
        <strong>Please fix the errors below</strong>
        <ul class="mb-0 mt-2">
          {% for e in form.non_field_errors %}<li>{{ e }}</li>{% endfor %}
        </ul>
      </div>
    {% endif %}

    <div class="card card-outline card-primary shadow-sm">
      <div class="card-header">
        <h3 class="card-title h6 mb-0">
          <i class="fas fa-user-plus mr-2"></i>Create your account
        </h3>
      </div>

      <div class="card-body">
        <form method="post" novalidate>
          {% csrf_token %}

          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="{{ form.first_name.id_for_label }}">First name</label>
              {% if form.first_name.errors %}
                {% render_field form.first_name class="form-control is-invalid" autocomplete="given-name" placeholder="First name" %}
              {% else %}
                {% render_field form.first_name class="form-control" autocomplete="given-name" placeholder="First name" %}
              {% endif %}
              {% for e in form.first_name.errors %}
                <div class="invalid-feedback d-block">{{ e }}</div>
              {% endfor %}
            </div>

            <div class="form-group col-md-6">
              <label for="{{ form.last_name.id_for_label }}">Last name</label>
              {% if form.last_name.errors %}
                {% render_field form.last_name class="form-control is-invalid" autocomplete="family-name" placeholder="Last name" %}
              {% else %}
                {% render_field form.last_name class="form-control" autocomplete="family-name" placeholder="Last name" %}
              {% endif %}
              {% for e in form.last_name.errors %}
                <div class="invalid-feedback d-block">{{ e }}</div>
              {% endfor %}
            </div>
          </div>

          <div class="form-group">
            <label for="{{ form.email.id_for_label }}">Email</label>
            {% if form.email.errors %}
              {% render_field form.email class="form-control is-invalid" autocomplete="email" placeholder="name@example.com" %}
            {% else %}
              {% render_field form.email class="form-control" autocomplete="email" placeholder="name@example.com" %}
            {% endif %}
            {% for e in form.email.errors %}
              <div class="invalid-feedback d-block">{{ e }}</div>
            {% endfor %}
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="{{ form.password1.id_for_label }}">Password</label>
              {% if form.password1.errors %}
                {% render_field form.password1 class="form-control is-invalid" autocomplete="new-password" placeholder="Password" %}
              {% else %}
                {% render_field form.password1 class="form-control" autocomplete="new-password" placeholder="Password" %}
              {% endif %}
              {% for e in form.password1.errors %}
                <div class="invalid-feedback d-block">{{ e }}</div>
              {% endfor %}
            </div>

            <div class="form-group col-md-6">
              <label for="{{ form.password2.id_for_label }}">Confirm password</label>
              {% if form.password2.errors %}
                {% render_field form.password2 class="form-control is-invalid" autocomplete="new-password" placeholder="Password (again)" %}
              {% else %}
                {% render_field form.password2 class="form-control" autocomplete="new-password" placeholder="Password (again)" %}
              {% endif %}
              {% for e in form.password2.errors %}
                <div class="invalid-feedback d-block">{{ e }}</div>
              {% endfor %}
            </div>
          </div>

          <div class="form-group form-check mb-3">
            {% if form.agree_to_terms.errors %}
              {% render_field form.agree_to_terms class="form-check-input is-invalid" %}
            {% else %}
              {% render_field form.agree_to_terms class="form-check-input" %}
            {% endif %}
            <label class="form-check-label" for="{{ form.agree_to_terms.id_for_label }}">
              I agree to the terms
            </label>
            {% for e in form.agree_to_terms.errors %}
              <div class="invalid-feedback d-block">{{ e }}</div>
            {% endfor %}
          </div>

          <button type="submit" class="btn btn-primary btn-block">Register</button>
        </form>

        <p class="mt-3 mb-0 text-center">
          <a href="{% url 'account_login' %}">I already have an account</a> Â·
          <a href="{% url 'account_reset_password' %}">Forgot password?</a>
          <a href="{% url 'account_resend_confirmation' %}">Resend confirmation email</a>

        </p>
      </div>
    </div>

    <p class="auth-muted text-center mt-3 mb-0">
      By creating an account you agree to our
      <a href="{% url 'terms' %}">Terms</a> and
      <a href="{% url 'privacy_policy' %}">Privacy Policy</a>.
    </p>
  </div>
</div>
{% endblock %}
