{% extends "base_auth.html" %}
{% load i18n socialaccount %}
{% block title %}
    {% trans "Social Connections" %}
{% endblock %}
{% block content %}
    <div class="login-box">
        <div class="card card-outline card-primary">
            <div class="card-header text-center">
                <span class="h5 mb-0">{% trans "Linked Social Accounts" %}</span>
            </div>
            <div class="card-body">
                {% if form.accounts %}
                    <ul class="list-group mb-3">
                        {% for base_account in form.accounts %}
                            {% with account=base_account.account %}
                                <li class="list-group-item d-flex align-items-center justify-content-between">
                                    <div>
                                        <strong>{{ account.get_provider.name }}</strong>
                                        <div class="small text-muted">{{ account.uid }}</div>
                                    </div>
                                    <div>
                                        <label class="mr-2 small text-muted">{% trans "Primary" %}</label>
                                        {{ base_account.primary }}
                                        <label class="ml-3 mr-2 small text-muted">{% trans "Delete" %}</label>
                                        {{ base_account.delete }}
                                    </div>
                                </li>
                            {% endwith %}
                        {% endfor %}
                    </ul>
                {% else %}
                    <div class="alert alert-info">{% trans "You have no social accounts connected." %}</div>
                {% endif %}
                {% get_providers as socialaccount_providers %}
                {% if socialaccount_providers %}
                    <h6 class="text-muted mb-2">{% trans "Add another account" %}</h6>
                    {% for provider in socialaccount_providers %}
                        {% include "socialaccount/snippets/provider_button.html" with provider=provider process="connect" %}
                    {% endfor %}
                {% endif %}
                <form method="post" action="{% url 'socialaccount_connections' %}">
                    {% csrf_token %}
                    {{ form.management_form }}
                    <button class="btn btn-primary btn-block mt-3" type="submit">{% trans "Save Changes" %}</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
